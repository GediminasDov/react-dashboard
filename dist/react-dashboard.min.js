!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("lodash"),require("d3"),require("react-nvd3"),require("classnames"),require("csv-es6-data-backend"),require("dkan-es6-data-backend"),require("fixed-data-table"),require("flux"),require("moment"),require("react-d3-core"),require("react-d3-map-choropleth"),require("react-select"),require("topojson"));else if("function"==typeof define&&define.amd)define(["react","lodash","d3","react-nvd3","classnames","csv-es6-data-backend","dkan-es6-data-backend","fixed-data-table","flux","moment","react-d3-core","react-d3-map-choropleth","react-select","topojson"],t);else{var n="object"==typeof exports?t(require("react"),require("lodash"),require("d3"),require("react-nvd3"),require("classnames"),require("csv-es6-data-backend"),require("dkan-es6-data-backend"),require("fixed-data-table"),require("flux"),require("moment"),require("react-d3-core"),require("react-d3-map-choropleth"),require("react-select"),require("topojson")):t(e.react,e.lodash,e.d3,e["react-nvd3"],e.classnames,e["csv-es6-data-backend"],e["dkan-es6-data-backend"],e["fixed-data-table"],e.flux,e.moment,e["react-d3-core"],e["react-d3-map-choropleth"],e["react-select"],e.topojson);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t,n,r,a,o,i,s,u,c,l,f,p,d){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="/static/",t(0)}([function(e,t,n){e.exports=n(23)},function(e,t){e.exports=require("react")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=(r(i),function(){function e(){a(this,e)}return o(e,null,[{key:"set",value:function(t,n){e.components=e.components||Object.create(null),e.components[t]=n}},{key:"get",value:function(t){return e.components[t]}}]),e}());t["default"]=s},function(e,t){function n(){c=!1,i.length?u=i.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(i=u,u=[];++l<t;)i&&i[l].run();l=-1,t=u.length}i=null,c=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function o(){}var i,s=e.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new a(e,t)),1!==u.length||c||setTimeout(r,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=(r(c),n(32)),f=n(10),p=r(f),d=n(7),h=r(d),m=n(5),y=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={data:[],dataset:null,queryObj:Object.assign({size:10,from:0},n.props.queryObj),isFeching:!1},n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){p["default"].register(this.onAction.bind(this))}},{key:"getFetchType",value:function(){return this.props.fetchData&&this.props.fetchData.type}},{key:"handleResize",value:function(){var e=(0,l.findDOMNode)(this).getBoundingClientRect().width;this.setState({componentWidth:e}),this.onResize()}},{key:"onResize",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=(0,l.findDOMNode)(this).getBoundingClientRect().width;this.setState({componentWidth:t}),window.addEventListener("resize",(0,m.debounce)(this.handleResize.bind(this),500));var n=this.getFetchType();if(n)if("function"===n&&(0,m.isFunction)(this[this.props.fetchData.name])){var r=this.props.fetchData.args||[];this.setState({isFeching:!0}),this.fetchData.apply(this,a(r)).then(this.onData.bind(this))}else if("backend"===n){var o=new h["default"]((0,m.omit)(this.props.fetchData,"type"));this.setState({isFeching:!0,dataset:o}),o.fetch().then(function(){e.query(e.state.queryObj)})}else"inline"===n&&this.setData(this.props.fetchData.records)}},{key:"onAction",value:function(){}},{key:"query",value:function(e){if(!this.state.dataset)throw new Error("Missing dataset. You need to use a backend to query against");this.state.dataset.query(e).then(this.onData.bind(this)),this.setState({queryObj:e,isFeching:!0})}},{key:"onData",value:function(e){var t=this;e.json?e.json().then(function(e){return t.setData(e)}):(this.state.dataset||(this.state.dataset=new h["default"]({records:e})),this.setData(e))}},{key:"onDataChange",value:function(e){}},{key:"fetchData",value:function(){return Promise.resolve(this[this.props.fetchData.name]())}},{key:"setData",value:function(e){var t=e.hits||e,n=e.total||e.length;this.setState({data:t,total:n,isFeching:!1}),this.onDataChange(e)}},{key:"emit",value:function(e){p["default"].dispatch(e)}},{key:"getData",value:function(){if(this.props.fetchData&&"function"===this.props.fetchData.type){var e=this[this.props.fetchData.name](this.props.fetchData.args);return e.then?this.state.data||[]:e}return this.state.data||[]}},{key:"getGlobalData",value:function(){return this.props.globalData||[]}}]),t}(c.Component);t["default"]=y},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(2),f=(r(l),n(4)),p=(r(f),function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=void 0;return e=this.props.isFeching?c["default"].createElement("div",{className:"loader"},c["default"].createElement("div",{className:"sp sp-slices"})):c["default"].createElement("span",null,this.props.children)}}]),t}(u.Component));t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(19),s=r(i),u=n(46),c=r(u),l=n(47),f=r(l),p=n(5),d=function(){function e(t){a(this,e),this.settings=t,this.backend=e.getBackendFromName(t.backend),this._store=this.backend,this.queryState={}}return o(e,null,[{key:"registerBackend",value:function(t,n){e.backends=e.backends||Object.create(null),e.backends[t]=n}},{key:"getBackendFromName",value:function(t){return e.backends[t]}}]),o(e,[{key:"fetch",value:function(){return this.backend.fetch((0,p.omit)(this.settings,"backend")).then(this.onFetch.bind(this))}},{key:"onFetch",value:function(e){this.fields=this._normalizeFields(e.fields),e.useMemoryStore&&(this._store=new s["default"](e.records,this.fields)),this._store.query(this.queryState,(0,p.omit)(this.settings,"backend")).then(this.onResults.bind(this))}},{key:"query",value:function(e){var t=this;return new Promise(function(n,r){t._store.query(e,t.settings).then(function(e){t.onResults(e),n(e)})})}},{key:"onResults",value:function(e){this.recordCount=e.total,this.records=e.hits}},{key:"_normalizeFields",value:function(e){return(0,p.uniq)(e||[]).map(function(e){return{id:e}})}}]),e}();t["default"]=d,d.registerBackend("csv",c["default"]),d.registerBackend("dkan",f["default"])},function(e,t,n){"use strict";function r(e,t){return Object.assign({},(0,o.property)(e)(t))}function a(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=0;e>r;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getProp=r,t.makeKey=a;var o=n(5)},function(e,t,n){(function(t){"use strict";var r=n(40),a=r;"production"!==t.env.NODE_ENV&&(a=function(e,t){for(var n=[],r=2,a=arguments.length;a>r;r++)n.push(arguments[r]);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(0!==t.indexOf("Failed Composite propType: ")&&!e){var o=0,i="Warning: "+t.replace(/%s/g,function(){return n[o++]});console.warn(i);try{throw new Error(i)}catch(s){}}}),e.exports=a}).call(t,n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),a=new r.Dispatcher;t["default"]=a},function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,a=1;a<arguments.length;a++){var o=arguments[a];if(null!=o){var i=Object(o);for(var s in i)r.call(i,s)&&(n[s]=i[s])}}return n}e.exports=n},function(e,t,n){(function(t){"use strict";function r(e,n){Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[n]:null},set:function(e){"production"!==t.env.NODE_ENV?u(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",n):null,this._store[n]=e}})}function a(e){try{var t={props:!0};for(var n in t)r(e,n);l=!0}catch(a){}}var o=n(33),i=n(20),s=n(11),u=n(9),c={key:!0,ref:!0},l=!1,f=function(e,n,r,a,o,i){if(this.type=e,this.key=n,this.ref=r,this._owner=a,this._context=o,"production"!==t.env.NODE_ENV){this._store={props:i,originalProps:s({},i)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(u){}if(this._store.validated=!1,l)return void Object.freeze(this)}this.props=i};f.prototype={_isReactElement:!0},"production"!==t.env.NODE_ENV&&a(f.prototype),f.createElement=function(e,t,n){var r,a={},s=null,u=null;if(null!=t){u=void 0===t.ref?null:t.ref,s=void 0===t.key?null:""+t.key;for(r in t)t.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(a[r]=t[r])}var l=arguments.length-2;if(1===l)a.children=n;else if(l>1){for(var p=Array(l),d=0;l>d;d++)p[d]=arguments[d+2];a.children=p}if(e&&e.defaultProps){var h=e.defaultProps;for(r in h)"undefined"==typeof a[r]&&(a[r]=h[r])}return new f(e,s,u,i.current,o.current,a)},f.createFactory=function(e){var t=f.createElement.bind(null,e);return t.type=e,t},f.cloneAndReplaceProps=function(e,n){var r=new f(e.type,e.key,e.ref,e._owner,e._context,n);return"production"!==t.env.NODE_ENV&&(r._store.validated=e._store.validated),r},f.cloneElement=function(e,t,n){var r,a=s({},e.props),o=e.key,u=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,l=i.current),void 0!==t.key&&(o=""+t.key);for(r in t)t.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(a[r]=t[r])}var p=arguments.length-2;if(1===p)a.children=n;else if(p>1){for(var d=Array(p),h=0;p>h;h++)d[h]=arguments[h+2];a.children=d}return new f(e.type,o,u,l,e._context,a)},f.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},e.exports=f}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var n=function(e,n,r,a,o,i,s,u){if("production"!==t.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,a,o,i,s,u],f=0;c=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return l[f++]}))}throw c.framesToPop=1,c}};e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),f=n(2),p=(r(f),n(4)),d=r(p),h=n(5),m=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=(0,h.pick)(this.props,"card").card,t=(0,h.omit)(this.props,"card"),n=void 0,r=void 0;return this.props.header&&(n=l["default"].createElement("div",{className:"card-header"},l["default"].createElement("span",{className:this.props.iconClass,"aria-hidden":"true"}),l["default"].createElement("span",{className:"card-header-content"},t.header))),this.props.footer&&(r=l["default"].createElement("div",{className:"card-footer"},t.footer)),l["default"].createElement("div",s({className:"card-"+t.cardStyle},e),n,l["default"].createElement("div",{className:"card-content"},t.children),r)}}]),t}(d["default"]);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(2),f=r(l),p=n(22),d=r(p),h=n(4),m=r(h),y=n(6),v=r(y),b=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.getData()||[],t=Object.assign({datum:e},this.props.settings);return c["default"].createElement(v["default"],{isFeching:this.state.isFeching},c["default"].createElement(d["default"],t))}}]),t}(m["default"]);t["default"]=b,f["default"].set("Chart",b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),f=n(15),p=(r(f),n(14)),d=r(p),h=n(2),m=r(h),y=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"renderRegion",value:function(e){var t=this;if(e)return e.map(function(e,n){var r=Object.assign({globalData:t.props.globalData},e);return l["default"].createElement(d["default"],s({key:n},e),l["default"].createElement(m["default"].get(e.type),r))})}}]),t}(c.Component);t["default"]=y,m["default"].set("Layout",y)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={STORE_CHANGE:"STORE_CHANGE",AUTOCOMPLETE_CHANGE:"AUTOCOMPLETE_CHANGE",EXECUTE:"EXECUTE"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(16),f=r(l),p=n(2),d=r(p),h=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"container"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-md-12"},this.renderRegion(this.props.regions.top))),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-md-4"},this.renderRegion(this.props.regions.left)),c["default"].createElement("div",{className:"col-md-4"},this.renderRegion(this.props.regions.middle)),c["default"].createElement("div",{className:"col-md-4"},this.renderRegion(this.props.regions.right))))}}]),t}(f["default"]);t["default"]=h,d["default"].set("Geary",h)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),i=function(){function e(t,n){r(this,e),this.records=t||[],n?this.fields=n:this.fields=(t[0]||[]).map(function(e,t){return{id:t,type:"string"}})}return a(e,[{key:"query",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new Promise(function(n,r){var a=t.size||e.records.length,o=t.from||0,i=e.records;i=e._applyFilters(i,t),i=e._applyFreeTextQuery(i,t);var s={total:i.length,hits:i.slice(o,o+a)};n(s)})}},{key:"_applyFreeTextQuery",value:function(e,t){var n=this;if(t.q){var r=t.q.split(" "),a=r.map(function(e){return new RegExp(e.toLowerCase())});e=e.filter(function(e){var t=!0;return a.forEach(function(r){var a=!1;n.fields.forEach(function(t){var n=e[t.id];n=null!==n&&void 0!==n?n.toString():"",a=a||r.test(n.toLowerCase())}),t=t&&a}),t})}return e}},{key:"_applyFilters",value:function(e,t){function n(e){var t=l[e.field].type||"string";return c[t]}function r(e,t){var r=n(t),a=r(e[t.field]),o=r(t.term);return a===o}function a(e,t){var r=n(t),a=r(e[t.field]),o=r(t.terms).split(",");return o.indexOf(a)>=0}function i(e,t){var r=(0,o.isUndefined)(t.from)||null===t.from||""===t.from,a=(0,o.isUndefined)(t.to)||null===t.to||""===t.to,i=n(t),s=i(e[t.field]),u=i(r?"":t.from),c=i(a?"":t.to);return r&&a||""!==s?(r||s>=u)&&(a||c>=s):!1}var s=t.filters||[],u={term:r,terms:a,range:i},c={integer:function(e){return parseFloat(e,10)},"float":function(e){return parseFloat(e,10)},number:function(e){return parseFloat(e,10)},string:function(e){return e.toString()},date:function(e){return Date.parse(e)},datetime:function(e){return new Date(e).valueOf()}},l=this.fields.reduce(function(e,t){return e[t.id]=t,e},{});return e.filter(function(e){var t=s.map(function(t){return u[t.type](e,t)});return(0,o.every)(t,o.identity)})}}]),e}();t["default"]=i},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t){e.exports=require("d3")},function(e,t){e.exports=require("react-nvd3")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardConstants=t.EventDispatcher=t.MemoryStore=t.Dataset=t.Geary=t.Registry=t.Text=t.Table=t.Metric=t.Layout=t.Goal=t.Dashboard=t.Choropleth=t.Chart=t.Card=t.BaseComponent=t.Autocomplete=void 0;var a=n(24);Object.defineProperty(t,"Autocomplete",{enumerable:!0,get:function(){return r(a)["default"]}});var o=n(4);Object.defineProperty(t,"BaseComponent",{enumerable:!0,get:function(){return r(o)["default"]}});var i=n(14);Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return r(i)["default"]}});var s=n(15);Object.defineProperty(t,"Chart",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(25);Object.defineProperty(t,"Choropleth",{enumerable:!0,get:function(){return r(u)["default"]}});var c=n(26);Object.defineProperty(t,"Dashboard",{enumerable:!0,get:function(){return r(c)["default"]}});var l=n(27);Object.defineProperty(t,"Goal",{enumerable:!0,get:function(){return r(l)["default"]}});var f=n(16);Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return r(f)["default"]}});var p=n(28);Object.defineProperty(t,"Metric",{enumerable:!0,get:function(){return r(p)["default"]}});var d=n(29);Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return r(d)["default"]}});var h=n(30);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return r(h)["default"]}});var m=n(2);Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return r(m)["default"]}});var y=n(8);Object.keys(y).forEach(function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var v=n(18);Object.defineProperty(t,"Geary",{enumerable:!0,get:function(){return r(v)["default"]}});var b=n(7);Object.defineProperty(t,"Dataset",{enumerable:!0,get:function(){return r(b)["default"]}});var g=n(19);Object.defineProperty(t,"MemoryStore",{enumerable:!0,get:function(){return r(g)["default"]}});var O=n(10);Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return r(O)["default"]}});var E=n(17);Object.defineProperty(t,"DashboardConstants",{enumerable:!0,get:function(){return r(E)["default"]}}),n(31)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),f=n(53),p=r(f),d=n(2),h=r(d),m=n(8),y=n(4),v=r(y),b=n(17),g=r(b),O=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={},n}return i(t,e),u(t,[{key:"onChange",value:function(e){this.setState({value:e}),this.emit({actionType:g["default"].AUTOCOMPLETE_CHANGE,value:e,id:this.props.id||(0,m.makeKey)(5)})}},{key:"loadOptions",value:function(e,t){var n=/\{\{(.+)\}\}/;return this.props.url?fetch(this.props.url.replace(n,e)).then(function(e){return e.json()}).then(function(e){return{options:e}}):this.props.options?Promise.resolve({options:this.props.options,isLoading:!1}):Promise.resolve({options:[],isLoading:!1})}},{key:"render",value:function(){return l["default"].createElement(p["default"].Async,s({value:this.state.value,loadOptions:this.loadOptions.bind(this)},this.props,{onChange:this.onChange.bind(this)}))}}]),t}(v["default"]);t["default"]=O,h["default"].set("Autocomplete",O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function u(e){return new Promise(function(t,n){fetch(e).then(function(e){return e.text()}).then(function(e){t(e)})["catch"](function(e){n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function k(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:k(a,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},p=n(4),d=r(p),h=n(1),m=r(h),y=n(51),v=n(2),b=r(v),g=n(8),O=n(52),E=n(54),w=n(21),_=n(7),j=r(_),P=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.levels=n.props.settings.levels,n.randKey=(0,g.makeKey)(4),n}return i(t,e),l(t,[{key:"_tooltipContent",value:function(e){var t=this.props.settings.tooltip.label;Object.assign(e,e.properties);var n=e[e[this.props.settings.domainMapKey]]||"",r={};return r[t]=n,r}},{key:"_domainValue",value:function(e){return Number(e[this.props.settings.domainField])}},{key:"_domainKey",value:function(e){return e[this.props.settings.domainKey]}},{key:"_mapKey",value:function(e){return Object.assign(e,e.properties),e[this.props.settings.domainMapKey]}},{key:"onDataChange",value:function(e){this.setState({domainData:e.domainData,topodata:e.topodata})}},{key:"componentDidMount",value:function(){this.props.settings.cssPath&&u(this.props.settings.cssPath).then(function(e){s(e)})["catch"](function(e){}),this.props.fetchData&&this.fetchData().then(this.onData.bind(this))["catch"](function(e){console.log("Error fetching data",e)}),s(this.css()),f(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"fetchData",value:function(){var e=this;return new Promise(function(t,n){var r=new j["default"](e.props.settings.dataset),a={};fetch(e.props.settings.mapDataUrl).then(function(e){var t=e.json();return t}).then(function(e){a.topodata=e,r.fetch().then(function(e){r.query({}).then(function(e){return a.domainData=e.hits,t(a)})})["catch"](function(e){return console.log("Dataset fetch failed",e),n(e)})})["catch"](function(e){return n(e)})})}},{key:"_attachResize",value:function(){window.addEventListener("resize",this._setSize.bind(this),!1)}},{key:"css",value:function(){for(var e="",t=this.randKey,n=this.props.settings.colors,r=0;r<this.levels;r++)e+="."+t+r+"-"+this.levels+" { fill:"+n[r]+"; }";return e}},{key:"legendSeries",value:function(){var e=[],t=this.domainScale(this.state.domainData),n=(t.domain[1]-t.domain[0])/this.props.settings.levels,r=this.props.settings.legendValFormat||"f",a=this.props.settings.legendValPrecision||2,o=(0,w.format)(r,a),i=(0,w.range)(t.domain[0],t.domain[1],n);i.push(t.domain[1]);for(var s=0;s<this.levels;s++){var u=o(i[s]),c=o(i[s+1]),l={field:u+" -- "+c,name:u+" -- "+c,color:this.props.settings.colors[s]};e.push(l)}return e}},{key:"domainScale",value:function(e){var t=this.props.settings,n=this.randKey,r={scale:"quantize",domain:[Number(t.domainLower),Number(t.domainUpper)],range:(0,w.range)(t.levels).map(function(e){return""+n+e+"-"+t.levels})};return r}},{key:"render",value:function(){var e=void 0,t=Object.assign({},this.props.settings);return this.state.domainData?(Object.assign(t,this.state.data,{type:this.props.type}),t.topodata=this.state.topodata,
t.domainData=this.state.domainData,t.tooltipContent=this._tooltipContent.bind(this),t.domainValue=this._domainValue.bind(this),t.domainKey=this._domainKey.bind(this),t.mapKey=this._mapKey.bind(this),t.domain=this.domainScale(this.state.domainData),t.scale=this.state.componentWidth,t.projection=t.projection||"azimuthalEqualArea","topojson"===t.mapFormat?(t.polygon&&(t.dataPolygon=(0,E.feature)(t.topodata,t.topodata.objects[t.polygon]).features),t.mesh&&(t.dataMesh=(0,E.mesh)(t.topodata,t.topodata.objects[t.mesh],function(e,t){return e!==t}))):"geojson"===t.mapFormat&&(t.dataPolygon=t.topodata.features),e=m["default"].createElement("div",{className:"choropleth-container"},m["default"].createElement(O.MapChoropleth,c({ref:"choropleth"},t)),m["default"].createElement("div",{className:"legend-container"},m["default"].createElement("h3",{className:"legend-header"},t.legendHeader),m["default"].createElement(y.Legend,{width:this.state.componentWidth,height:t.legendHeight,margins:t.legendMargins,legendClassName:t.legendClassName,legendPosition:t.legendPosition,legendOffset:t.legendOffset,chartSeries:this.legendSeries()})))):e=m["default"].createElement("p",{ref:"choropleth",className:"loading"},"Loading..."),e}}]),t}(d["default"]);t["default"]=P,b["default"].set("Choropleth",P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(18),f=(r(l),n(2)),p=r(f),d=n(4),h=r(d),m=n(10),y=(r(m),function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={data:[]},n}return i(t,e),s(t,[{key:"render",value:function(){var e="string"==typeof this.props.layout?p["default"].get(this.props.layout):this.props.layout;if(!e)throw new Error("Missing layout class "+this.props.layout);var t=Object.assign({globalData:this.state.data||[]},this.props);return c["default"].createElement("div",{className:"container"},c["default"].createElement("h1",{className:"dashboard-title"},this.props.title),c["default"].createElement(e,t))}}]),t}(h["default"]));t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),f=n(2),p=r(f),d=n(4),h=r(d),m=n(6),y=r(m),v=n(5),b=n(21),g=n(22),O=r(g),E=n(50),w=r(E),_=n(45),j=r(_),P=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={metric:0,showEndNumber:n.props.showEndNumber!==!1,dateFormat:n.props.dateFormat||"MMMM Do YYYY",numberFormat:n.props.numberFormat||".0f"},n}return i(t,e),u(t,[{key:"getMetric",value:function(e){return this[this.props.metric](e)}},{key:"getTolerance",value:function(e,t){var n=this.props.tolerance,r=Math.abs(e);return n.filter(function(e){return t||r>e.from&&r<=e.to})}},{key:"trackStatus",value:function(){var e=Date.parse(this.props.startDate),t=Date.parse(this.props.endDate),n=Number(this.props.startNumber),r=Number(this.props.endNumber),a=this.getTracker(e,t,n,r),o=a(Date.now()),i=o-this.getMetric(this.getData()),s={increase:0>=i,decrease:i>=0,maintain_above:0>=i,maintain_below:i>=0,maintain:!0,mesure:!0};return this.getTolerance(i,s[this.props.action])}},{key:"getTracker",value:function(e,t,n,r){return function(a){var o=(r-n)/(t-e),i=o*(a-e);return i}}},{key:"formatNumber",value:function(e){var t=(0,b.format)(this.state.numberFormat);return t(e)}},{key:"formatDate",value:function(e){return(0,w["default"])(e.toISOString()).format(this.state.dateFormat)}},{key:"formatActionName",value:function(e){return(0,v.capitalize)(this.props.action.replace("_"," "))}},{key:"getCaption",value:function(){var e={action:this.formatActionName(this.props.action),caption:this.props.caption,startNumber:this.formatNumber(this.props.startNumber),endNumber:this.formatNumber(this.props.endNumber),startDate:this.formatDate(new Date(this.props.startDate)),endDate:this.formatDate(new Date(this.props.endDate))},t=(0,v.template)(this.props.captionTemplates[this.props.action]);return t(e)}},{key:"render",value:function(){var e=Object.assign({},(0,v.head)(this.trackStatus())),t={background:this.props.background},n=void 0,r=void 0;if(t=Object.assign({},t,this.props.style),this.props.spline){var a=Object.assign({},this.props.spline);n=l["default"].createElement(O["default"],s({type:"sparklinePlus",datum:this.getData(),showLastValue:!1,color:["#333333"]},a))}return this.state.showEndNumber&&(r=l["default"].createElement("span",{className:"card-goal-end-number"}," ",this.props.divider," ",this.formatNumber(this.props.endNumber))),l["default"].createElement(y["default"],{isFeching:this.props.isFeching},l["default"].createElement("div",{className:"goal",style:t},l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-md-4"},l["default"].createElement("div",{className:"card-goal-icon"},l["default"].createElement("span",{className:(0,j["default"])("glyphicon",this.props.icon)}))),l["default"].createElement("div",{className:"col-md-8"},l["default"].createElement("div",{className:"card-goal-caption"},this.getCaption()))),l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-md-4"},l["default"].createElement("div",{className:"card-goal-progress"},l["default"].createElement("span",{className:"card-goal-metric"},this.formatNumber(this.getMetric(this.getData()))),r)),l["default"].createElement("div",{className:"col-md-8"},l["default"].createElement("div",{className:"card-goal-status"},l["default"].createElement("a",{style:{color:e.color},href:this.props.link},e.label)),l["default"].createElement("div",{className:"card-goal-end-date"},this.formatDate(new Date(this.props.endDate))))),l["default"].createElement("div",{className:"row"},l["default"].createElement("div",{className:"col-md-12"},l["default"].createElement("div",{className:"spline"},n)))))}}]),t}(h["default"]);P.defaultProps={captionTemplates:{increase:"${action} ${caption} ${endNumber} by ${endDate}",decrease:"${action} ${caption} ${endNumber} by ${endDate}",maintain:"${action} at ${endNumber} ${caption} by ${endDate}",maintain_above:"${action} ${endNumber} ${caption} by ${endDate}",maintain_below:"${action} ${endNumber} ${caption} by ${endDate}",mesure:"${caption}"},divider:" / ",style:{color:"black",background:"white"}},t["default"]=P,p["default"].set("Goal",P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(2),f=r(l),p=n(4),d=r(p),h=n(6),m=r(h),y=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=Object.assign({},{metric:0},n.state),n}return i(t,e),s(t,[{key:"getMetric",value:function(e){return this[this.props.metric](e)}},{key:"render",value:function(){var e={background:this.props.background};return e=Object.assign({},e,this.props.style),c["default"].createElement(m["default"],{isFeching:this.state.isFeching},c["default"].createElement("div",{className:"metric",style:e},c["default"].createElement("div",{className:"col-sm-3 col-lg-4"},c["default"].createElement("div",{className:"card-metric-icon"},c["default"].createElement("span",{className:this.props.iconClass}))),c["default"].createElement("div",{className:"col-sm-9 col-lg-8"},c["default"].createElement("div",{className:"card-metric-number"},this.getMetric(this.getData())),c["default"].createElement("div",{className:"card-metric-caption"},this.props.caption))))}}]),t}(d["default"]);t["default"]=y,f["default"].set("Metric",y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function _(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:_(a,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(1),f=r(l),p=n(48),d=n(2),h=r(d),m=n(8),y=n(7),v=(r(y),n(4)),b=r(v),g=n(6),O=r(g),E=n(5),w=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={gridWidth:1,gridHeight:1,rowsPerPage:n.props.rowsPerPage,currentPage:1,queryObj:{size:n.props.queryObj.size,from:n.props.queryObj.from}},n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this._attachResize(),this._setSize(),c(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"getPages",value:function(e,t,n){var r=this.getTotalPages(e,t),a=10,o=a/2,i=void 0,s=void 0;return 0>=n-o?(i=0>=n-o?1:n-o,s=Math.min(a,r)):n+o>r?(i=Math.max(r-a,1),s=n+o>r?r:n+o):(i=n-o,s=n+o),(0,E.range)(i,s+1)}},{key:"getPageNumbers",value:function(e,t,n){var r=this;return this.getPages(e,t,n).map(function(e){return f["default"].createElement("li",{className:e==r.state.currentPage?"active":"",key:"page-"+e},f["default"].createElement("a",{onClick:(0,E.partialRight)(r._onPageChange,e).bind(r),href:"#"},e))})}},{key:"getLastPage",value:function(e,t){var n=getTotalPages(e,t);return n[n.length-1]}},{key:"getTotalPages",value:function(e,t){return Math.ceil(t/e)}},{key:"_setSize",value:function(){var e=this.refs.table,t=e.offsetWidth,n=e.offsetHeight;this.setState({gridWidth:t,gridHeight:n})}},{key:"_attachResize",value:function(){window.addEventListener("resize",this._setSize.bind(this),!1)}},{key:"_onPageChange",value:function(e,t,n,r){e.preventDefault();var a=this.state.rowsPerPage,o=Object.assign({},this.state.queryObj,{size:a,from:r*a-a});this.query(o),this.setState({currentPage:r,queryObj:o})}},{key:"_onFilterChange",value:function(e){var t=this.state.rowsPerPage,n=Object.assign({},this.state.queryObj,{size:t,from:this.state.currentPage*t-t,q:e.target.value});this.query(n),this.setState({currentPage:1})}},{key:"_onRowsPerPageChange",value:function(e){var t=Object.assign({},this.state.queryObj);t.size=Number(e.target.value),t.from=0,this.query(t),this.setState({rowsPerPage:Number(e.target.value),currentPage:1})}},{key:"render",value:function(){var e=this.state,t=e.gridWidth,n=(e.gridHeight,this.getData()||[]),r=(0,m.getProp)("settings.table",this.props),a=(0,m.getProp)("settings.columns",this.props),o=(0,m.getProp)("settings.cells",this.props),i=Object.keys(n[0]||{}),u=this.getTotalPages(this.state.rowsPerPage,this.state.total),c=i.map(function(e){var t=(0,m.getProp)("overrides."+e,a);return f["default"].createElement(p.Column,s({header:f["default"].createElement(p.Cell,null,e),key:e,columnKey:e,cell:function(e){var t=(0,m.getProp)("overrides."+e.rowIndex,o);return f["default"].createElement(p.Cell,s({},e,o,t),n[e.rowIndex][e.columnKey])}},a,t))});return f["default"].createElement("div",{ref:"table"},f["default"].createElement("div",{className:"row"},f["default"].createElement("div",{className:"col-md-10"},f["default"].createElement("div",{className:"form-group"},f["default"].createElement("input",{onChange:this._onFilterChange.bind(this),placeholder:"Filter",className:"form-control"}))),f["default"].createElement("div",{className:"col-md-2"},f["default"].createElement("div",{onChange:this._onRowsPerPageChange.bind(this),className:"form-group"},f["default"].createElement("select",{className:"form-control"},f["default"].createElement("option",{value:"10"},"10"),f["default"].createElement("option",{value:"25"},"25"),f["default"].createElement("option",{value:"50"},"50"),f["default"].createElement("option",{value:"100"},"100"),f["default"].createElement("option",{value:"500"},"500"))))),f["default"].createElement(O["default"],{isFeching:this.state.isFeching},f["default"].createElement("div",{className:"table-container"},f["default"].createElement(p.Table,s({rowsCount:n.length},r,{width:t}),c)),f["default"].createElement("nav",null,f["default"].createElement("ul",{className:"pagination"},f["default"].createElement("li",{className:1===this.state.currentPage?"hide":""},f["default"].createElement("a",{onClick:(0,E.partialRight)(this._onPageChange,1).bind(this),href:"#","aria-label":"Previous"},f["default"].createElement("span",{"aria-hidden":"true"},"«"))),f["default"].createElement("li",{className:1===this.state.currentPage?"hide":""},f["default"].createElement("a",{onClick:(0,E.partialRight)(this._onPageChange,this.state.currentPage-1).bind(this),href:"#","aria-label":"Previous"},f["default"].createElement("span",{"aria-hidden":"true"},"«"))),this.getPageNumbers(this.state.rowsPerPage,this.state.total,this.state.currentPage),f["default"].createElement("li",{className:u&&this.state.currentPage!==u?"":"hide"},f["default"].createElement("a",{onClick:(0,E.partialRight)(this._onPageChange,this.state.currentPage+1).bind(this),href:"#","aria-label":"Next"},f["default"].createElement("span",{"aria-hidden":"true"},"»"))),f["default"].createElement("li",{className:u&&this.state.currentPage!==u?"":"hide"},f["default"].createElement("a",{onClick:(0,E.partialRight)(this._onPageChange,u).bind(this),href:"#","aria-label":"Next"},f["default"].createElement("span",{"aria-hidden":"true"},"»")))))))}}]),t}(b["default"]);w.defaultProps={rowsPerPage:10,queryObj:{size:10,from:0}},t["default"]=w,h["default"].set("Table",w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),l=n(2),f=r(l),p=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}})}}]),t}(u.Component);t["default"]=p,f["default"].set("Text",p)},function(e,t){},function(e,t,n){"use strict";e.exports=n(34)},function(e,t,n){(function(t){"use strict";var r=n(11),a=n(41),o=n(9),i=!1,s={current:a,withContext:function(e,n){"production"!==t.env.NODE_ENV&&("production"!==t.env.NODE_ENV?o(i,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."):null,i=!0);var a,u=s.current;s.current=r({},u,e);try{a=n()}finally{s.current=u}return a}};e.exports=s}).call(t,n(3))},function(e,t,n){(function(t){"use strict";function r(e){return"production"!==t.env.NODE_ENV?o.createFactory(e):a.createFactory(e)}var a=n(12),o=n(35),i=n(44),s=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);e.exports=s}).call(t,n(3))},function(e,t,n){(function(t){"use strict";function r(){if(g.current){var e=g.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function a(e){var t=e&&e.getPublicInstance();if(t){var n=t.constructor;if(n)return n.displayName||n.name||void 0}}function o(){var e=g.current;return e&&a(e)||void 0}function i(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,u('Each child in an array or iterator should have a unique "key" prop.',e,t))}function s(e,t,n){k.test(e)&&u("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function u(e,n,r){var i=o(),s="string"==typeof r?r:r.displayName||r.name,u=i||s,c=j[e]||(j[e]={});if(!c.hasOwnProperty(u)){c[u]=!0;var l=i?" Check the render method of "+i+".":s?" Check the React.render call using <"+s+">.":"",f="";if(n&&n._owner&&n._owner!==g.current){var p=a(n._owner);f=" It was passed a child from "+p+"."}"production"!==t.env.NODE_ENV?_(!1,e+"%s%s See https://fb.me/react-warning-keys for more information.",l,f):null}}function c(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];m.isValidElement(r)&&i(r,t)}else if(m.isValidElement(e))e._store.validated=!0;else if(e){var a=E(e);if(a){if(a!==e.entries)for(var o,u=a.call(e);!(o=u.next()).done;)m.isValidElement(o.value)&&i(o.value,t)}else if("object"==typeof e){var c=y.extractIfFragment(e);for(var l in c)c.hasOwnProperty(l)&&s(l,c[l],t)}}}function l(e,n,a,o){for(var i in n)if(n.hasOwnProperty(i)){var s;try{"production"!==t.env.NODE_ENV?w("function"==typeof n[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e||"React class",b[o],i):w("function"==typeof n[i]),s=n[i](a,i,e,o)}catch(u){s=u}if(s instanceof Error&&!(s.message in P)){P[s.message]=!0;var c=r(this);"production"!==t.env.NODE_ENV?_(!1,"Failed propType: %s%s",s.message,c):null}}}function f(e,n){var r=n.type,a="string"==typeof r?r:r.displayName,o=n._owner?n._owner.getPublicInstance().constructor.displayName:null,i=e+"|"+a+"|"+o;if(!N.hasOwnProperty(i)){N[i]=!0;var s="";a&&(s=" <"+a+" />");var u="";o&&(u=" The element was created by "+o+"."),"production"!==t.env.NODE_ENV?_(!1,"Don't set .props.%s of the React component%s. Instead, specify the correct value when initially creating the element or use React.cloneElement to make a new element with updated props.%s",e,s,u):null}}function p(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function d(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&p(t[r],n[r])||(f(r,e),t[r]=n[r]))}}function h(e){if(null!=e.type){var n=O.getComponentClassForElement(e),r=n.displayName||n.name;n.propTypes&&l(r,n.propTypes,e.props,v.prop),"function"==typeof n.getDefaultProps&&("production"!==t.env.NODE_ENV?_(n.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):null)}}var m=n(12),y=n(36),v=n(39),b=n(38),g=n(20),O=n(37),E=n(42),w=n(13),_=n(9),j={},P={},k=/^\d+$/,N={},D={checkAndWarnForMutatedProps:d,createElement:function(e,n,r){"production"!==t.env.NODE_ENV?_(null!=e,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components)."):null;var a=m.createElement.apply(this,arguments);if(null==a)return a;for(var o=2;o<arguments.length;o++)c(arguments[o],e);return h(a),a},createFactory:function(e){var n=D.createElement.bind(null,e);if(n.type=e,"production"!==t.env.NODE_ENV)try{Object.defineProperty(n,"type",{enumerable:!1,get:function(){return"production"!==t.env.NODE_ENV?_(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):null,Object.defineProperty(this,"type",{value:e}),e}})}catch(r){}return n},cloneElement:function(e,t,n){for(var r=m.cloneElement.apply(this,arguments),a=2;a<arguments.length;a++)c(arguments[a],r.type);return h(r),r}};e.exports=D}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var r=n(12),a=n(9);if("production"!==t.env.NODE_ENV){var o="_reactFragment",i="_reactDidWarn",s=!1;try{var u=function(){return 1};Object.defineProperty({},o,{enumerable:!1,value:!0}),Object.defineProperty({},"key",{enumerable:!0,get:u}),s=!0}catch(c){}var l=function(e,n){Object.defineProperty(e,n,{enumerable:!0,get:function(){return"production"!==t.env.NODE_ENV?a(this[i],"A ReactFragment is an opaque type. Accessing any of its properties is deprecated. Pass it to one of the React.Children helpers."):null,this[i]=!0,this[o][n]},set:function(e){"production"!==t.env.NODE_ENV?a(this[i],"A ReactFragment is an immutable opaque type. Mutating its properties is deprecated."):null,this[i]=!0,this[o][n]=e}})},f={},p=function(e){var t="";for(var n in e)t+=n+":"+typeof e[n]+",";var r=!!f[t];return f[t]=!0,r}}var d={create:function(e){if("production"!==t.env.NODE_ENV){if("object"!=typeof e||!e||Array.isArray(e))return"production"!==t.env.NODE_ENV?a(!1,"React.addons.createFragment only accepts a single object.",e):null,e;if(r.isValidElement(e))return"production"!==t.env.NODE_ENV?a(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."):null,e;if(s){var n={};Object.defineProperty(n,o,{enumerable:!1,value:e}),Object.defineProperty(n,i,{writable:!0,enumerable:!1,value:!1});for(var u in e)l(n,u);return Object.preventExtensions(n),n}}return e},extract:function(e){return"production"!==t.env.NODE_ENV&&s?e[o]?e[o]:("production"!==t.env.NODE_ENV?a(p(e),"Any use of a keyed object should be wrapped in React.addons.createFragment(object) before being passed as a child."):null,e):e},extractIfFragment:function(e){if("production"!==t.env.NODE_ENV&&s){if(e[o])return e[o];for(var n in e)if(e.hasOwnProperty(n)&&r.isValidElement(e[n]))return d.extract(e)}return e}};e.exports=d}).call(t,n(3))},function(e,t,n){(function(t){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=f[t];return null==n&&(f[t]=n=c(t)),n}function a(e){return"production"!==t.env.NODE_ENV?u(l,"There is no registered component for the tag %s",e.type):u(l),new l(e.type,e.props)}function o(e){return new p(e)}function i(e){return e instanceof p}var s=n(11),u=n(13),c=null,l=null,f={},p=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){s(f,e)},injectAutoWrapper:function(e){c=e}},h={getComponentClassForElement:r,createInternalComponent:a,createInstanceForText:o,isTextComponent:i,injection:d};e.exports=h}).call(t,n(3))},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";var r=n(43),a=r({prop:null,context:null,childContext:null});e.exports=a},function(e,t){function n(e){return function(){return e}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&Object.freeze(n),e.exports=n}).call(t,n(3))},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[a]);return"function"==typeof t?t:void 0}var r="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";e.exports=n},function(e,t,n){(function(t){"use strict";var r=n(13),a=function(e){var n,a={};"production"!==t.env.NODE_ENV?r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object."):r(e instanceof Object&&!Array.isArray(e));for(n in e)e.hasOwnProperty(n)&&(a[n]=n);return a};e.exports=a}).call(t,n(3))},function(e,t){"use strict";function n(e,t,n){if(!e)return null;var a={};for(var o in e)r.call(e,o)&&(a[o]=t.call(n,e[o],o,e));return a}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("csv-es6-data-backend")},function(e,t){e.exports=require("dkan-es6-data-backend")},function(e,t){e.exports=require("fixed-data-table")},function(e,t){e.exports=require("flux")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("react-d3-core")},function(e,t){e.exports=require("react-d3-map-choropleth")},function(e,t){e.exports=require("react-select")},function(e,t){e.exports=require("topojson")}])});